<?xml version="1.0"?>
<?xml-stylesheet href="JSBSim.xsl" type="application/xml"?>

<!--
:copyright: 2024, IAHM-COL
License: GPLv3

Redistribution, or reuse, with or without modifications
shall keep this attribution information. 
-->

<system name="Engine Standby and EPR RTG">
  <!-- MAX: 0, INT: 1, MCT: 2, DRT: 3 MAN: 4 -->
  <property value="1">instruments/engine-stdby/display/epr-mode</property>
  <!-- OFF: 0, N2: 1, EPR: 2 -->
  <property value="0">instruments/engine-stdby/display/mode</property>
  <channel name="Knobs">
    <fcs_function name="instruments/engine-stdby/epr-rating/knob-rotation">
      <function>
	<difference>
	  <product>
	    <property>instruments/engine-stdby/epr-rating/man-rating</property>
	    <value>300</value>
	  </product>
	  <value>300</value>
	</difference>
      </function>
      <clipto>
	<min>0</min>
	<max>300</max>
      </clipto>
    </fcs_function>

    <fcs_function name="instruments/engine-stdby/display/knob-rotation">
      <function>
	<product>
	  <property>instruments/engine-stdby/display/mode</property>
	  <value>32</value>
	</product>
      </function>
      <clipto>
	<min>0</min>
	<max>64</max>
      </clipto>
    </fcs_function>
  </channel>

  <property value="2.00">instruments/engine-stdby/epr-rating/max-rating</property>
  <property value="1.95">instruments/engine-stdby/epr-rating/int-rating</property>
  <property value="1.92">instruments/engine-stdby/epr-rating/mct-rating</property>
  <property value="1.65">instruments/engine-stdby/epr-rating/drt-rating</property>
  <property value="1.87">instruments/engine-stdby/epr-rating/man-rating</property>
  <channel name="EPR Rating modes">
    <switch name="instruments/engine-stdby/epr-rating/rating">
      <default value="instruments/engine-stdby/epr-rating/man-rating"/>
      <test value="instruments/engine-stdby/epr-rating/max-rating">
	instruments/engine-stdby/display/epr-mode eq 0
      </test>
      <test value="instruments/engine-stdby/epr-rating/int-rating">
	instruments/engine-stdby/display/epr-mode eq 1
      </test>
      <test value="systems/fadec/engine/RTGCap/mct-rating-capped">
	instruments/engine-stdby/display/epr-mode eq 2
      </test>
      <test value="systems/fadec/engine/RTGCap/drt-rating-capped">
	instruments/engine-stdby/display/epr-mode eq 3
      </test>
      <test value="instruments/engine-stdby/epr-rating/man-rating">
	instruments/engine-stdby/display/epr-mode eq 4
      </test>
    </switch>
  </channel>

  <property value="1">instruments/engine-stdby/display/status/brt</property>
  <channel name="Display status">
    <switch name="instruments/engine-stdby/display/status/on">
      <default value="0"/>
      <test value="1">
	instruments/engine-stdby/display/mode ne 0	
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine/on">
      <default value="0"/>
      <test value="1">
	/engines/engine/running eq 1	
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine[1]/on">
      <default value="0"/>
      <test value="1">
	/engines/engine[1]/running eq 1	
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine[2]/on">
      <default value="0"/>
      <test value="1">
	/engines/engine[2]/running eq 1	
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine[3]/on">
      <default value="0"/>
      <test value="1">
	/engines/engine[3]/running eq 1	
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/any-engine-on">
      <default value="0"/>
      <test logic="OR" value="1">
	instruments/engine-stdby/display/status/engine/on eq 1
	instruments/engine-stdby/display/status/engine[1]/on eq 1
	instruments/engine-stdby/display/status/engine[2]/on eq 1
	instruments/engine-stdby/display/status/engine[3]/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/print-rtg-value">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/any-engine-on eq 1	
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/print-rtg-dots">
      <default value="0"/>
      <test logic="OR" value="1">
	instruments/engine-stdby/display/status/any-engine-on eq 0
	instruments/engine-stdby/display/status/on eq 0
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/print-mode-value">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/print-mode-dots">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/on eq 0
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine/print-value">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/engine/on eq 1
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine/print-dots">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/engine/on eq 0
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine[1]/print-value">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/engine[1]/on eq 1
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine[1]/print-dots">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/engine[1]/on eq 0
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine[2]/print-value">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/engine[2]/on eq 1
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine[2]/print-dots">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/engine[2]/on eq 0
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine[3]/print-value">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/engine[3]/on eq 1
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>

    <switch name="instruments/engine-stdby/display/status/engine[3]/print-dots">
      <default value="0"/>
      <test logic="AND" value="1">
	instruments/engine-stdby/display/status/engine[3]/on eq 0
	instruments/engine-stdby/display/status/on eq 1
      </test>      
    </switch>
  </channel>

  <channel name="Engines">    
    <switch name="instruments/engine-stdby/engines/engine/n2">
      <default value="/engines/engine/n2"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine[1]/n2">
      <default value="/engines/engine[1]/n2"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine[2]/n2">
      <default value="/engines/engine[2]/n2"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine[3]/n2">
      <default value="/engines/engine[3]/n2"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine/egt-degf">
      <default value="/engines/engine/egt-degf"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine[1]/egt-degf">
      <default value="/engines/engine[1]/egt-degf"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine[2]/egt-degf">
      <default value="/engines/engine[2]/egt-degf"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine[3]/egt-degf">
      <default value="/engines/engine[3]/egt-degf"/>
    </switch>

    <fcs_function name="instruments/engine-stdby/engines/engine/egt-degc">
      <function>
	<product>
	  <difference>
	    <property>instruments/engine-stdby/engines/engine/egt-degf</property>
	    <value>32</value>
	  </difference>
	  <value>0.555555555556</value>
	</product>
      </function>
    </fcs_function>

    <fcs_function name="instruments/engine-stdby/engines/engine[1]/egt-degc">
      <function>
	<product>
	  <difference>
	    <property>instruments/engine-stdby/engines/engine[1]/egt-degf</property>
	    <value>32</value>
	  </difference>
	  <value>0.555555555556</value>
	</product>
      </function>
    </fcs_function>

    <fcs_function name="instruments/engine-stdby/engines/engine[2]/egt-degc">
      <function>
	<product>
	  <difference>
	    <property>instruments/engine-stdby/engines/engine[2]/egt-degf</property>
	    <value>32</value>
	  </difference>
	  <value>0.555555555556</value>
	</product>
      </function>
    </fcs_function>
    
    <fcs_function name="instruments/engine-stdby/engines/engine[3]/egt-degc">
      <function>
	<product>
	  <difference>
	    <property>instruments/engine-stdby/engines/engine[3]/egt-degf</property>
	    <value>32</value>
	  </difference>
	  <value>0.555555555556</value>
	</product>
      </function>
    </fcs_function>
    
    <switch name="instruments/engine-stdby/engines/engine/n1">
      <default value="/engines/engine/n1"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine[1]/n1">
      <default value="/engines/engine[1]/n1"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine[2]/n1">
      <default value="/engines/engine[2]/n1"/>
    </switch>

    <switch name="instruments/engine-stdby/engines/engine[3]/n1">
      <default value="/engines/engine[3]/n1"/>
    </switch>
  </channel>
  
</system>
